<html><head> 
    <title id="T1">
    Ventas
    </title>
    <style>
    #BGC{background-color: lightblue}
    #BGC:hover{background-color: yellow}
    </style>
    <script>
     datos =[0,1,2,3,4,5,6,7,8,9,10,11,12];
    for (let f=0;f<=12;f++) datos[f]= ["0","a","a","a","a","a"];
    
    for (let f=1;f<=12;f++){
        for (let c=1;c<=5;c++) 
            datos[f][c]= Math.round(50+Math.random()*50);
            }
    
    function genTable(){
    var f,c, tStr;
    tStr='<Table  style:background-color: lightblue;">';
    for (f=1;f<4;f++){
    tStr += "<TR>";
    for (c=1;c<11;c++){tStr += '<TD id = "BGC">' + f + ','+c + '</TD>';}
    tStr += "</TR>";
    //alert (tStr);
    }
    tStr += "</Table>";
    return tStr;
    }
    function genTable1( Nfil,  Ncol) {// alert (Nfil + ","+ Ncol); 
    var Suc = ["Mes","Santa Fe", "Parana", "Santo Tome","Rafaela","Rosario"];
    var Mes =["","ENE","FEB","MAR","ABR","MAY","JUN","JUL","AGO","SEP","OCT","NOV","DIC"]
    
    var f,c, tStr;
    Ncol++;
    Nfil++;
    tStr="";
    for (c=0;c<Ncol;c++){ tStr += '<TH id = "BGC"> ' + Suc[c] +' </TH>'; }
    
    for (f=1;f<Nfil;f++){
    tStr += "<TR>";
    tStr += '<TD id = "BGC"> ' +  Mes[f] + '</TD>';
    //for (c=1;c<Ncol;c++){ tStr += '<TD id = "BGC"  >   <input class = "NF2" name="NFIL" type="text" id = "C' + c +"_"+ f + '" value ="'+ Math.round(50+Math.random()*50) + '" onClick= "ClkTD(this.id)" onkeypress = "myFunction(event);"> </TD>'; }
    for (c=1;c<Ncol;c++){ tStr += '<TD id = "BGC"  >   <input class = "NF2" name="NFIL" type="text" id = "C' + c +"_"+ f + '" value ="'+ datos[f][c] + '" onClick= "ClkTD(this.id)" onkeypress = "myFunction(event);"> </TD>'; }
    
    
    tStr += "</TR>";
    }
    //tStr += "</Table>";
    //alert (tStr);
    return tStr;
    }
    </script>
    <style>
    .grid-container {
    width: 100%;
      display: grid;
      grid-template-columns: auto auto;
      background-color: #2196F3;
      padding: 2px;
     justify-content: left;
    }
    .grid-item {
    width:100%;
      background-color: rgba(255,200,200,1);
      border: 1px solid rgba(0, 0, 255, 1);
      padding: 0px;
      font-size: 10px;
      text-align: center;
    }
    #NF1 {  
    width: 100%;
    background-color: rgba(200,200,200,0);
      border: 0px solid rgba(0, 0, 0, 0.8);
      padding: 0px;
      font-size: 30px;
      text-align: center;
    }
    #NF1:hover {  
    background-color: rgba(255,255,255,.55);
    
    }
    .NF2 {  
    width: 100%;
    background-color: rgba(200,200,200,.8);
      border: 0px solid rgba(0, 0, 0, 0.8);
      padding: 1px;
    
      font-size: 16px;
      text-align: center;
    }
    .NF2:hover {  
    
    text-align: center;
    background-color: rgba(255,255,255,.55);
    
    }
    .NF2:focus {  
    border: 2px dotted rgba(0, 0, 255, 1);;
    border-color: blue;
    background-color: rgba(255,255,255,1);
    
    }
    #NF1:focus {  
    border: 2px dotted rgba(0, 0, 255, 1);;
    border-color: blue;
    background-color: rgba(255,255,255,1);
    
    }
    
    </style>
    <script>
    
    function prepEvent(){
    var x = document.getElementsByClassName("NF2");
    var i;
    for (i=0;i<x.length;i++){ x[i].addEventListener("blur", selGraf); }
    //alert("Sali");
    }
    
    function findMax(){
    var i, f, c;
    var Max=0;
    var MaxPos ="";
    
    //alert (MaxPos + ":" + Max);
    
    var x = document.getElementsByClassName("NF2");
    var TT = "Elemento , Contenido";
    
    for (i=0;i<x.length;i++){
    TT +="\n"+x[i].id + ", " + x[i].value;
    if (Number(x[i].value) > Max) {Max= x[i].value;MaxPos = x[i].id}                
    //alert (TT);
    }
    //alert (MaxPos + ":" + Max);
    return Max;
    } 
    function findMaxSuma(){
    var i, f, c;
    var Max = 0;
    var MaxPos ="";
    var Suma = 0;
    //alert (MaxPos + ":" + Max);
    
    var x = document.getElementsByClassName("NF2");
    var TT = "Elemento , Contenido";
    
    for (i=0;i<x.length;i+=3){
    Suma = Number ( x[i].value ) 
    Suma += Number ( x[i+1].value ) 
    Suma += Number ( x[i+2].value ) 
    if (Suma > Max) {Max= Suma;MaxPos = i;}                
    //alert (TT);
    }
    //alert (MaxPos + ":" + Max);
    return Max;
    } 
    function selGraf(){
    if (document.getElementById("Lineas").checked ) redib();
    if (document.getElementById("Barras").checked ) grafBarras();
    if (document.getElementById("Apiladas").checked ) grafApiladas();
    
    }
    
    function redib() {
    var Max = findMax();
    
    var tId= "";
    var YG ="";
    var XG;
    var c,f;
    var Salida ='<svg Id = "P" width="600px" height="400px" viewBox="0 0 11 100" preserveAspectRatio="none" >\n ';
    Salida += '<rect width="11" height="100" style="fill:rgb(220,220,220);stroke-width:0.1;stroke:rgb(255,255,0)" />\n ';
    //Salida += '<polyline  style="fill:none;stroke:blue;stroke-width:.1" points= "0,20 1,25 2,40 3,120 6,140 10,180" />';
    
    var TMP=" ";
    
    for (c=1;c<=3;c++){
      Salida += '<polyline  points="';
        TMP=" ";
    
        for (f=1;f<=12;f++){  
            tId= "C"+c+"_"+f;
            XG = f -1; //50*(f-1);
            YG = 100 * (1 - document.getElementById(tId).value/Max);
            TMP += " "+XG+","+YG; 
         }
    
         Salida += TMP +  '" style="fill:none;stroke:' ;
        switch (c){
            case 1:
            Salida += "rgb(255,0,0)";
            break;
            case 2:
            Salida += "rgb(0,0,255)";
            break;
            case 3:
            Salida += "rgb(0,255,0)";
            break;
        }    
      Salida += ';stroke-width:0.1" />\n';
    }
    
    
    Salida +='</svg> ';
    document.getElementById("Graf").innerHTML= Salida;
    }
    
    function grafBarras() {
    
    var Max= findMax();
    var tId= "";
    var YG ="";
    var XG;
    var Salida ='<svg Id = "P" width="600px" height="400px" viewBox="0 0 120 100" preserveAspectRatio="none" >\n  <rect width="120" height="100" style="fill:rgb(220,220,220);stroke-width:0.1;stroke:rgb(255,255,0)" />\n '; //<polyline  points="';//0,20 50,25 100,40 150,120 200,140 250,180"?;
    
    var x = document.getElementsByClassName("NF2");
    var i;
    //alert ("Entre");
    //alert (x.length);
    for (i=0;i<36; i+=3){
      Salida += '<rect x = "';
      Salida +=  i*10/3 + '" y = "' ;
      Salida += 100*(1-x[i].value/Max )+ '"width= "3" height="';
      Salida += 100*x[i].value/Max + '" style= "fill:rgb(255,0,0);stroke-width:0.05;stroke:rgb(0,0,0)" />\n';
    }
    for (i=1;i<36; i+=3){
      Salida += '<rect x = "';
      Salida +=  i*10/3 + '" y = "' ;
      Salida += 100*(1-x[i].value/Max )+ '"width= "3" height="';
      Salida += 100*x[i].value/Max + '" style= "fill:rgb(0,0,255);stroke-width:0.05;stroke:rgb(0,0,0)" />\n';
    }
    
    for (i=2;i<36; i+=3){
      Salida += '<rect x = "';
      Salida +=  i*10/3 + '" y = "' ;
      Salida += 100*(1-x[i].value/Max )+ '"width= "3" height="';
      Salida += 100*x[i].value/Max + '" style= "fill:rgb(0,255,0);stroke-width:0.05;stroke:rgb(0,0,0)" />\n';
    }
    
    Salida +='</svg> ';
    document.getElementById("Graf").innerHTML= Salida;
    
    }
    function grafApiladas() {
    
    var Max= findMaxSuma();
    var tId= "";
    var YG ="";
    var XG;
    var Salida ='<svg Id = "P" width="600px" height="400px" viewBox="0 0 120 100" preserveAspectRatio="none" >\n  <rect width="120" height="100" style="fill:rgb(220,220,220);stroke-width:0.1;stroke:rgb(255,255,0)" />\n '; //<polyline  points="';//0,20 50,25 100,40 150,120 200,140 250,180"?;
    
    var x = document.getElementsByClassName("NF2");
    var i, Y1, Y2, Y3;
    //alert ("Entre");
    //alert (x.length);
    for (i=0;i<36; i+=3){
      Y1 = x[i].value/Max ;
      Y2 = x[i+1].value/Max ;
      Y3 = x[i+2].value/Max ;
      
      Salida += '<rect x = "';
      Salida +=  i*10/3 + '" y = "' ;
      Salida += 100*(1- Y1)+ '"width= "10" height="';
      Salida += 100*Y1 + '" style= "fill:rgb(255,0,0);stroke-width:0.1;stroke:rgb(0,0,0)" />\n';
    
      Salida += '<rect x = "';
      Salida +=  i*10/3 + '" y = "' ;
      Salida += 100*(1-(Y2+Y1))+ '"width= "10" height="';
      Salida += 100*Y2 + '" style= "fill:rgb(0,0,255);stroke-width:0.1;stroke:rgb(0,0,0)" />\n';
    
      Salida += '<rect x = "';
      Salida +=  i*10/3 + '" y = "' ;
      Salida += 100*(1-(Y1+Y2+Y3)) + '"width= "10" height="';
      Salida += 100*Y3 + '" style= "fill:rgb(0,255,0);stroke-width:0.1;stroke:rgb(0,0,0)" />\n';
      }
    
    /*
    for (i=1;i<36; i+=3){
      Salida += '<rect x = "';
      Salida +=  i*10/3 + '" y = "' ;
      Salida += 100*(1-x[i].value/Max )+ '"width= "3" height="';
      Salida += 100*x[i].value/Max + '" style= "fill:rgb(0,0,255);stroke-width:0.05;stroke:rgb(0,0,0)" />\n';
    }
    
    for (i=2;i<36; i+=3){
      Salida += '<rect x = "';
      Salida +=  i*10/3 + '" y = "' ;
      Salida += 100*(1-x[i].value/Max )+ '"width= "3" height="';
      Salida += 100*x[i].value/Max + '" style= "fill:rgb(0,255,0);stroke-width:0.05;stroke:rgb(0,0,0)" />\n';
    }
    */
    Salida +='</svg> ';
    document.getElementById("Graf").innerHTML= Salida;
    
    }
    
    </script>
    </head> 
    
    <body>
    
        
    <h1> Ventas mensuales por Sucursal</h1>

    <label for="sucursales">Cuantas sucursales desea visualizar ?</label>
    <select id="sucursales" name="sucursales">
    <option value="1">1</option>
    <option value="2">2</option>
    <option value="3">3</option>
    <option value="4">4</option>
    <option value="5">5</option>
    </select>

    <p>
    </p><div class="grid-container">
    <div clas="grid-item">
    <table id="emptyTable" style="width: 100%;background-color: red" float:left;=""><tbody><tr><th id="BGC"> Mes </th><th id="BGC"> Santa Fe </th><th id="BGC"> Paran� </th><th id="BGC"> Santo Tom� </th></tr><tr><td id="BGC"> ENE</td><td id="BGC">   <input class="NF2" name="NFIL" type="text" id="C1_1" value="94" onclick="ClkTD(this.id)" onkeypress="myFunction(event);"> </td><td id="BGC">   <input class="NF2" name="NFIL" type="text" id="C2_1" value="94" onclick="ClkTD(this.id)" onkeypress="myFunction(event);"> </td><td id="BGC">   <input class="NF2" name="NFIL" type="text" id="C3_1" value="79" onclick="ClkTD(this.id)" onkeypress="myFunction(event);"> </td></tr><tr><td id="BGC"> FEB</td><td id="BGC">   <input class="NF2" name="NFIL" type="text" id="C1_2" value="54" onclick="ClkTD(this.id)" onkeypress="myFunction(event);"> </td><td id="BGC">   <input class="NF2" name="NFIL" type="text" id="C2_2" value="80" onclick="ClkTD(this.id)" onkeypress="myFunction(event);"> </td><td id="BGC">   <input class="NF2" name="NFIL" type="text" id="C3_2" value="92" onclick="ClkTD(this.id)" onkeypress="myFunction(event);"> </td></tr><tr><td id="BGC"> MAR</td><td id="BGC">   <input class="NF2" name="NFIL" type="text" id="C1_3" value="63" onclick="ClkTD(this.id)" onkeypress="myFunction(event);"> </td><td id="BGC">   <input class="NF2" name="NFIL" type="text" id="C2_3" value="65" onclick="ClkTD(this.id)" onkeypress="myFunction(event);"> </td><td id="BGC">   <input class="NF2" name="NFIL" type="text" id="C3_3" value="74" onclick="ClkTD(this.id)" onkeypress="myFunction(event);"> </td></tr><tr><td id="BGC"> ABR</td><td id="BGC">   <input class="NF2" name="NFIL" type="text" id="C1_4" value="95" onclick="ClkTD(this.id)" onkeypress="myFunction(event);"> </td><td id="BGC">   <input class="NF2" name="NFIL" type="text" id="C2_4" value="75" onclick="ClkTD(this.id)" onkeypress="myFunction(event);"> </td><td id="BGC">   <input class="NF2" name="NFIL" type="text" id="C3_4" value="94" onclick="ClkTD(this.id)" onkeypress="myFunction(event);"> </td></tr><tr><td id="BGC"> MAY</td><td id="BGC">   <input class="NF2" name="NFIL" type="text" id="C1_5" value="58" onclick="ClkTD(this.id)" onkeypress="myFunction(event);"> </td><td id="BGC">   <input class="NF2" name="NFIL" type="text" id="C2_5" value="67" onclick="ClkTD(this.id)" onkeypress="myFunction(event);"> </td><td id="BGC">   <input class="NF2" name="NFIL" type="text" id="C3_5" value="85" onclick="ClkTD(this.id)" onkeypress="myFunction(event);"> </td></tr><tr><td id="BGC"> JUN</td><td id="BGC">   <input class="NF2" name="NFIL" type="text" id="C1_6" value="68" onclick="ClkTD(this.id)" onkeypress="myFunction(event);"> </td><td id="BGC">   <input class="NF2" name="NFIL" type="text" id="C2_6" value="76" onclick="ClkTD(this.id)" onkeypress="myFunction(event);"> </td><td id="BGC">   <input class="NF2" name="NFIL" type="text" id="C3_6" value="85" onclick="ClkTD(this.id)" onkeypress="myFunction(event);"> </td></tr><tr><td id="BGC"> JUL</td><td id="BGC">   <input class="NF2" name="NFIL" type="text" id="C1_7" value="75" onclick="ClkTD(this.id)" onkeypress="myFunction(event);"> </td><td id="BGC">   <input class="NF2" name="NFIL" type="text" id="C2_7" value="79" onclick="ClkTD(this.id)" onkeypress="myFunction(event);"> </td><td id="BGC">   <input class="NF2" name="NFIL" type="text" id="C3_7" value="73" onclick="ClkTD(this.id)" onkeypress="myFunction(event);"> </td></tr><tr><td id="BGC"> AGO</td><td id="BGC">   <input class="NF2" name="NFIL" type="text" id="C1_8" value="77" onclick="ClkTD(this.id)" onkeypress="myFunction(event);"> </td><td id="BGC">   <input class="NF2" name="NFIL" type="text" id="C2_8" value="94" onclick="ClkTD(this.id)" onkeypress="myFunction(event);"> </td><td id="BGC">   <input class="NF2" name="NFIL" type="text" id="C3_8" value="69" onclick="ClkTD(this.id)" onkeypress="myFunction(event);"> </td></tr><tr><td id="BGC"> SEP</td><td id="BGC">   <input class="NF2" name="NFIL" type="text" id="C1_9" value="91" onclick="ClkTD(this.id)" onkeypress="myFunction(event);"> </td><td id="BGC">   <input class="NF2" name="NFIL" type="text" id="C2_9" value="63" onclick="ClkTD(this.id)" onkeypress="myFunction(event);"> </td><td id="BGC">   <input class="NF2" name="NFIL" type="text" id="C3_9" value="55" onclick="ClkTD(this.id)" onkeypress="myFunction(event);"> </td></tr><tr><td id="BGC"> OCT</td><td id="BGC">   <input class="NF2" name="NFIL" type="text" id="C1_10" value="84" onclick="ClkTD(this.id)" onkeypress="myFunction(event);"> </td><td id="BGC">   <input class="NF2" name="NFIL" type="text" id="C2_10" value="56" onclick="ClkTD(this.id)" onkeypress="myFunction(event);"> </td><td id="BGC">   <input class="NF2" name="NFIL" type="text" id="C3_10" value="55" onclick="ClkTD(this.id)" onkeypress="myFunction(event);"> </td></tr><tr><td id="BGC"> NOV</td><td id="BGC">   <input class="NF2" name="NFIL" type="text" id="C1_11" value="54" onclick="ClkTD(this.id)" onkeypress="myFunction(event);"> </td><td id="BGC">   <input class="NF2" name="NFIL" type="text" id="C2_11" value="70" onclick="ClkTD(this.id)" onkeypress="myFunction(event);"> </td><td id="BGC">   <input class="NF2" name="NFIL" type="text" id="C3_11" value="76" onclick="ClkTD(this.id)" onkeypress="myFunction(event);"> </td></tr><tr><td id="BGC"> DIC</td><td id="BGC">   <input class="NF2" name="NFIL" type="text" id="C1_12" value="94" onclick="ClkTD(this.id)" onkeypress="myFunction(event);"> </td><td id="BGC">   <input class="NF2" name="NFIL" type="text" id="C2_12" value="74" onclick="ClkTD(this.id)" onkeypress="myFunction(event);"> </td><td id="BGC">   <input class="NF2" name="NFIL" type="text" id="C3_12" value="54" onclick="ClkTD(this.id)" onkeypress="myFunction(event);"> </td></tr></tbody></table>
    
    </div>
    
    <div class="grid-item">
    <div id="Graf"><svg id="P" width="600px" height="400px" viewBox="0 0 11 100" preserveAspectRatio="none">
     <rect width="11" height="100" style="fill:rgb(220,220,220);stroke-width:0.1;stroke:rgb(255,255,0)"></rect>
     <polyline points="  0,1.0526315789473717 1,43.15789473684211 2,33.684210526315795 3,0 4,38.94736842105263 5,28.421052631578945 6,21.052631578947366 7,18.947368421052634 8,4.210526315789476 9,11.578947368421055 10,43.15789473684211 11,1.0526315789473717" style="fill:none;stroke:rgb(255,0,0);stroke-width:0.1"></polyline>
    <polyline points="  0,1.0526315789473717 1,15.789473684210531 2,31.57894736842105 3,21.052631578947366 4,29.47368421052632 5,19.999999999999996 6,16.84210526315789 7,1.0526315789473717 8,33.684210526315795 9,41.05263157894738 10,26.315789473684216 11,22.10526315789474" style="fill:none;stroke:rgb(0,0,255);stroke-width:0.1"></polyline>
    <polyline points="  0,16.84210526315789 1,3.157894736842104 2,22.10526315789474 3,1.0526315789473717 4,10.526315789473683 5,10.526315789473683 6,23.15789473684211 7,27.368421052631575 8,42.10526315789473 9,42.10526315789473 10,19.999999999999996 11,43.15789473684211" style="fill:none;stroke:rgb(0,255,0);stroke-width:0.1"></polyline>
    </svg> </div>
    </div>
    
    </div>
    
    <script> 
    document.getElementById("emptyTable").innerHTML = genTable1(12,5);
    redib ();
    prepEvent ();
    
    </script>
    
    
    
    
    <hr>
    <input type="radio" name="tipoGraf" id="Lineas" onclick="redib()" checked="">Lineas<br>
    <input type="radio" name="tipoGraf" id="Barras" onclick="grafBarras()">Barras <br>
    <input type="radio" name="tipoGraf" id="Apiladas" onclick="grafApiladas()">Barras Apiladas <br>
     
    <label for="CLK">Clicked:</label><input name="CLK0" type="text" id="CLK" value="-" size="3" onclick="redib ()"><br><br>
    <button name="Revisar" onclick="var kk= grafBarras()">Verificar</button>
    
    <script>
    
    function ClkTD(kk){
    document.getElementById ("CLK").value =kk;
    }
    function myFunction(event) {
      var x = event.which || event.keyCode;
    if (x ==13) document.getElementById ("CLK").focus();
    }
    </script>
    
    </body></html>